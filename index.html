<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MeuCard√°pio ¬∑ Card√°pio Digital</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      background-color: #f3f4f6;
      color: #1f2937;
    }

    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #f97316;
      --gray-bg: #f9fafb;
      --card-white: #ffffff;
      --text-dark: #111827;
      --text-muted: #6b7280;
      --border-light: #e5e7eb;
    }

    header {
      background: var(--card-white);
      border-bottom: 1px solid var(--border-light);
      position: sticky;
      top: 0;
      z-index: 40;
      box-shadow: 0 4px 12px rgba(0,0,0,0.02);
    }

    .header-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 1.5rem;
      letter-spacing: -0.02em;
    }
    .logo span {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .admin-login-btn {
      background: transparent;
      border: 1px solid var(--border-light);
      padding: 0.4rem 1rem;
      border-radius: 40px;
      font-size: 0.85rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.3rem;
      color: var(--text-muted);
    }
    .admin-login-btn:hover {
      background: var(--gray-bg);
    }

    .main-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 2rem 1.5rem 6rem;
    }

    section {
      display: none;
    }
    section.active-section {
      display: block;
    }

    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    .modal {
      background: white;
      padding: 2rem;
      border-radius: 2rem;
      width: 90%;
      max-width: 380px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .modal h3 {
      margin-bottom: 1rem;
    }
    .modal input, .modal select, .modal textarea {
      width: 100%;
      padding: 1rem;
      border: 1px solid var(--border-light);
      border-radius: 40px;
      margin: 0.5rem 0;
      background: white;
    }
    .modal-actions {
      display: flex;
      gap: 0.8rem;
      justify-content: flex-end;
      margin-top: 1rem;
    }

    .admin-tabs {
      display: flex;
      gap: 0.5rem;
      border-bottom: 2px solid var(--border-light);
      padding-bottom: 0.2rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .tab-btn {
      background: transparent;
      border: none;
      padding: 0.7rem 1.5rem;
      font-weight: 600;
      color: var(--text-muted);
      border-radius: 30px 30px 0 0;
      cursor: pointer;
      font-size: 0.95rem;
    }
    .tab-btn.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
      background: rgba(37,99,235,0.05);
    }

    .admin-card {
      background: var(--card-white);
      border-radius: 1.2rem;
      padding: 1.5rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.02);
      border: 1px solid var(--border-light);
      margin-bottom: 1.5rem;
    }
    .input-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin: 1rem 0;
    }
    .input-group input, .input-group select, .input-group textarea {
      padding: 0.8rem 1rem;
      border: 1px solid var(--border-light);
      border-radius: 1.5rem;
      font-size: 0.95rem;
      flex: 1 1 200px;
      background: var(--gray-bg);
    }

    .category-title {
      font-size: 1.6rem;
      font-weight: 700;
      margin: 2rem 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .category-title::before {
      content: '‚Ä¢';
      color: var(--secondary);
      font-size: 2.5rem;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.2rem;
      margin-bottom: 2rem;
    }
    .product-card {
      background: var(--card-white);
      border: 1px solid var(--border-light);
      border-radius: 1.5rem;
      padding: 1.2rem;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 10px rgba(0,0,0,0.02);
    }
    .product-card strong {
      font-size: 1.2rem;
    }
    .product-desc {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin: 0.3rem 0 0.8rem;
      flex: 1;
    }
    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.8rem;
    }
    .product-price {
      font-weight: 700;
      color: var(--primary);
      font-size: 1.25rem;
    }
    .qty-control {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: #f3f4f6;
      padding: 0.2rem 0.2rem 0.2rem 0.8rem;
      border-radius: 2rem;
    }
    .qty-control button {
      background: white;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      cursor: pointer;
      color: var(--primary);
    }
    .qty-control button:hover {
      background: var(--primary);
      color: white;
    }

    .cart-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border-light);
      padding: 0.8rem 1.5rem;
      z-index: 50;
    }
    .cart-container {
      max-width: 1280px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .cart-info {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }
    .cart-info textarea {
      width: 260px;
      height: 2.8rem;
      padding: 0.5rem 1rem;
      border-radius: 40px;
      border: 1px solid var(--border-light);
      resize: none;
      background: white;
    }
    .total-price {
      font-weight: 700;
      font-size: 1.3rem;
      color: var(--primary-dark);
    }

    @media print {
      body * { visibility: hidden; }
      #printArea, #printArea * { visibility: visible; }
      #printArea {
        position: absolute;
        top: 0;
        left: 0;
        width: 80mm;
        padding: 4mm;
        font-family: 'Courier New', monospace;
      }
    }

    @media (max-width: 780px) {
      .cart-container { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>

<header>
  <div class="header-container">
    <div class="logo">
      <span>MeuCard√°pio</span>
    </div>
    <div class="admin-login-btn" onclick="abrirModalAdmin()">
      üîê √Årea do dono
    </div>
  </div>
</header>

<!-- MODAL DE LOGIN REAL -->
<div id="modalAdmin" class="modal-overlay">
  <div class="modal">
    <h3>Acesso restrito</h3>
    <p>Digite a senha para gerenciar o card√°pio:</p>
    <input type="password" id="senhaInput" placeholder="senha">
    <div class="modal-actions">
      <button class="btn btn-outline" onclick="fecharModal()">Cancelar</button>
      <button class="btn btn-primary" onclick="verificarSenha()">Entrar</button>
    </div>
  </div>
</div>

<!-- MODAL DE EDI√á√ÉO DE PRODUTO -->
<div id="modalEditarProduto" class="modal-overlay">
  <div class="modal">
    <h3>‚úèÔ∏è Editar produto</h3>
    <input type="text" id="editNome" placeholder="Nome">
    <input type="number" id="editPreco" placeholder="Pre√ßo R$" step="0.01">
    <select id="editCategoria"></select>
    <textarea id="editDesc" placeholder="Descri√ß√£o curta" rows="2"></textarea>
    <div class="modal-actions">
      <button class="btn btn-outline" onclick="fecharModalEditar()">Cancelar</button>
      <button class="btn btn-primary" onclick="salvarEdicaoProduto()">Salvar</button>
    </div>
  </div>
</div>

<main class="main-container">
  <section id="menu" class="active-section">
    <h2 style="font-size:2rem; margin-bottom:1rem;">üçΩÔ∏è Nosso Card√°pio</h2>
    <div id="menuList" class="product-grid"></div>
  </section>

  <section id="admin">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h2>‚öôÔ∏è Gerenciar card√°pio</h2>
      <button class="btn btn-outline" onclick="sairAdmin()">Sair do painel</button>
    </div>
    <div class="admin-tabs">
      <button class="tab-btn active" onclick="switchTab('geral', this)">Geral</button>
      <button class="tab-btn" onclick="switchTab('categorias', this)">Categorias</button>
      <button class="tab-btn" onclick="switchTab('produtos', this)">Produtos</button>
      <button class="tab-btn" onclick="switchTab('qrcode', this)">QR Code</button>
    </div>

    <div id="geral" class="admin-card">
      <h3>üìã Vis√£o geral</h3>
      <p>Gerencie categorias e produtos. As altera√ß√µes aparecem automaticamente no card√°pio.</p>
      <p><strong>N√∫mero da loja (WhatsApp):</strong> <input type="text" id="whatsappLoja" placeholder="5511999999999" style="padding:0.5rem;border-radius:40px;border:1px solid #ccc;width:200px;"></p>
    </div>

    <div id="categorias" style="display:none;" class="admin-card">
      <h3>‚ûï Categorias</h3>
      <div class="input-group">
        <input type="text" id="catNome" placeholder="Ex: Pizzas, Bebidas...">
        <button class="btn btn-primary" onclick="addCategoria()">Adicionar</button>
      </div>
      <div id="catList"></div>
    </div>

    <div id="produtos" style="display:none;" class="admin-card">
      <h3>üçî Adicionar produto</h3>
      <div class="input-group">
        <input type="text" id="pNome" placeholder="Nome">
        <input type="number" id="pPreco" placeholder="Pre√ßo R$" step="0.01">
        <select id="pCategoria"></select>
        <textarea id="pDesc" placeholder="Descri√ß√£o curta" rows="2"></textarea>
        <button class="btn btn-primary" onclick="addProduto()">Salvar produto</button>
      </div>
      <hr style="margin:1.5rem 0;">
      <h4>Produtos existentes</h4>
      <div id="prodList" style="margin-top:1rem;"></div>
    </div>

    <div id="qrcode" style="display:none;" class="admin-card">
      <h3>üì≤ QR Code do card√°pio</h3>
      <div style="background: white; padding:2rem; border-radius:2rem; display:inline-block;">
        <img id="qr" width="220" src="" alt="QR code">
      </div>
    </div>
  </section>
</main>

<div class="cart-bar">
  <div class="cart-container">
    <div class="cart-info">
      <textarea id="obs" placeholder="Observa√ß√µes (ex: tirar cebola)"></textarea>
      <span class="total-price" id="total">R$ 0,00</span>
    </div>
    <button class="btn btn-primary" onclick="finalizar()" style="padding:0.8rem 2rem;">üì≤ Pedir via WhatsApp</button>
  </div>
</div>

<div id="printArea" style="display:none"></div>

<script>
  // ===== PROTE√á√ÉO REAL =====
  const SENHA_HASH = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918'; // hash de "admin"
  
  let adminLogado = false;
  let produtoEditandoIndex = null;

  async function verificarSenha() {
    const senhaDigitada = document.getElementById('senhaInput').value;
    const hashDigitado = await sha256(senhaDigitada);
    
    if (hashDigitado === SENHA_HASH) {
      adminLogado = true;
      sessionStorage.setItem('adminAuth', 'true');
      fecharModal();
      document.querySelectorAll('section').forEach(s => s.classList.remove('active-section'));
      document.getElementById('admin').classList.add('active-section');
      render();
    } else {
      alert('Senha incorreta!');
    }
  }

  async function sha256(texto) {
    const encoder = new TextEncoder();
    const data = encoder.encode(texto);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  }

  function verificarAcessoAdmin() {
    const auth = sessionStorage.getItem('adminAuth');
    if (auth !== 'true') {
      adminLogado = false;
      if (document.getElementById('admin').classList.contains('active-section')) {
        document.getElementById('admin').classList.remove('active-section');
        document.getElementById('menu').classList.add('active-section');
      }
      return false;
    }
    adminLogado = true;
    return true;
  }

  const originalShowSection = window.showSection;
  window.showSection = function(id) {
    if (id === 'admin' && !verificarAcessoAdmin()) {
      abrirModalAdmin();
      return;
    }
    document.querySelectorAll('section').forEach(s => s.classList.remove('active-section'));
    document.getElementById(id).classList.add('active-section');
  };

  // ===== DADOS =====
  let categorias = JSON.parse(localStorage.getItem('categorias')) || ['Pizzas', 'Bebidas'];
  let produtos = JSON.parse(localStorage.getItem('produtos')) || [
    { nome: 'Margherita', preco: 35.90, cat: 'Pizzas', desc: 'Molho, mussarela, manjeric√£o' },
    { nome: 'Calabresa', preco: 42.50, cat: 'Pizzas', desc: 'Calabresa, cebola, azeitona' },
    { nome: 'Coca-cola 2L', preco: 12.00, cat: 'Bebidas', desc: 'Gelada' }
  ];
  let carrinho = {};
  let pedido = Number(localStorage.getItem('pedido')) || 1;
  let numeroLoja = localStorage.getItem('whatsappLoja') || '5511999999999';

  // ===== FUN√á√ïES =====
  function abrirModalAdmin() {
    document.getElementById('modalAdmin').style.display = 'flex';
  }
  
  function fecharModal() {
    document.getElementById('modalAdmin').style.display = 'none';
  }
  
  function abrirModalEditar(index) {
    produtoEditandoIndex = index;
    const p = produtos[index];
    document.getElementById('editNome').value = p.nome;
    document.getElementById('editPreco').value = p.preco;
    document.getElementById('editDesc').value = p.desc || '';
    
    const selectCat = document.getElementById('editCategoria');
    selectCat.innerHTML = categorias.map(c => `<option ${c === p.cat ? 'selected' : ''}>${c}</option>`).join('');
    
    document.getElementById('modalEditarProduto').style.display = 'flex';
  }
  
  function fecharModalEditar() {
    document.getElementById('modalEditarProduto').style.display = 'none';
    produtoEditandoIndex = null;
  }
  
  function salvarEdicaoProduto() {
    if (produtoEditandoIndex === null) return;
    
    produtos[produtoEditandoIndex] = {
      nome: document.getElementById('editNome').value,
      preco: parseFloat(document.getElementById('editPreco').value),
      cat: document.getElementById('editCategoria').value,
      desc: document.getElementById('editDesc').value
    };
    
    fecharModalEditar();
    salvar();
  }
  
  function sairAdmin() {
    adminLogado = false;
    sessionStorage.removeItem('adminAuth');
    document.querySelectorAll('section').forEach(s => s.classList.remove('active-section'));
    document.getElementById('menu').classList.add('active-section');
  }

  function render() {
    if (document.getElementById('admin').classList.contains('active-section')) {
      if (!verificarAcessoAdmin()) {
        sairAdmin();
        return;
      }
    }

    const inputLoja = document.getElementById('whatsappLoja');
    if (inputLoja) {
      inputLoja.value = numeroLoja;
      inputLoja.oninput = (e) => {
        numeroLoja = e.target.value.replace(/\D/g, '');
        localStorage.setItem('whatsappLoja', numeroLoja);
      };
    }

    const selectCat = document.getElementById('pCategoria');
    if (selectCat) selectCat.innerHTML = categorias.map(c => `<option>${c}</option>`).join('');

    // Lista de categorias com bot√µes de editar/excluir
    const catDiv = document.getElementById('catList');
    if (catDiv) {
      catDiv.innerHTML = categorias.map((c, i) => `
        <div style="display:flex;justify-content:space-between;align-items:center;background:#eef2f6;border-radius:30px;margin:0.3rem;padding:0.3rem 1rem;">
          <span>${c}</span>
          <div style="display:flex;gap:0.5rem;">
            <button class="btn btn-outline" style="padding:0.2rem 0.8rem;" onclick="editarCategoria(${i})">‚úèÔ∏è</button>
            <button class="btn btn-outline" style="padding:0.2rem 0.8rem;" onclick="removerCategoria(${i})">üóëÔ∏è</button>
          </div>
        </div>
      `).join('');
    }

    // Lista de produtos (admin) com bot√µes de editar/excluir
    const prodDiv = document.getElementById('prodList');
    if (prodDiv) {
      prodDiv.innerHTML = produtos.map((p,i) => 
        `<div style="display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed #ccc;padding:8px 0">
          <span>${p.nome} - R$ ${p.preco.toFixed(2)} (${p.cat})</span>
          <div style="display:flex;gap:0.5rem;">
            <button class="btn btn-outline" style="padding:0.2rem 0.8rem;" onclick="abrirModalEditar(${i})">‚úèÔ∏è editar</button>
            <button class="btn btn-outline" style="padding:0.2rem 0.8rem;" onclick="removerProduto(${i})">üóëÔ∏è remover</button>
          </div>
        </div>`
      ).join('');
    }

    // CARD√ÅPIO
    const menuEl = document.getElementById('menuList');
    if (menuEl) {
      let html = '';
      categorias.forEach(cat => {
        const produtosCat = produtos.filter(p => p.cat === cat);
        if (!produtosCat.length) return;
        html += `<div class="category-title">${cat}</div>`;
        produtosCat.forEach(p => {
          const idx = produtos.findIndex(prod => prod.nome === p.nome && prod.cat === p.cat);
          const q = carrinho[idx] || 0;
          html += `
            <div class="product-card">
              <strong>${p.nome}</strong>
              <div class="product-desc">${p.desc || ''}</div>
              <div class="product-footer">
                <span class="product-price">R$ ${p.preco.toFixed(2)}</span>
                <div class="qty-control">
                  <span>${q}</span>
                  <button onclick="mudarQty(${idx}, -1)">‚àí</button>
                  <button onclick="mudarQty(${idx}, 1)">+</button>
                </div>
              </div>
            </div>
          `;
        });
      });
      menuEl.innerHTML = html || '<p style="color:gray; text-align:center;">Nenhum produto cadastrado üò¢</p>';
    }

    // Total carrinho
    const total = Object.entries(carrinho).reduce((acc, [idx, qty]) => acc + (produtos[idx]?.preco || 0) * qty, 0);
    document.getElementById('total').innerText = `R$ ${total.toFixed(2)}`;

    // QR code
    const qrImg = document.getElementById('qr');
    if (qrImg) {
      qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(window.location.href)}`;
    }
  }

  function mudarQty(index, delta) {
    if (!produtos[index]) return;
    const atual = carrinho[index] || 0;
    const nova = atual + delta;
    if (nova <= 0) delete carrinho[index];
    else carrinho[index] = nova;
    render();
  }

  function addCategoria() {
    const inp = document.getElementById('catNome');
    if (inp.value.trim()) {
      categorias.push(inp.value.trim());
      inp.value = '';
      salvar();
    }
  }
  
  function editarCategoria(index) {
    const novaCategoria = prompt('Editar categoria:', categorias[index]);
    if (novaCategoria && novaCategoria.trim()) {
      const antigoNome = categorias[index];
      categorias[index] = novaCategoria.trim();
      
      // Atualiza categoria nos produtos
      produtos = produtos.map(p => {
        if (p.cat === antigoNome) {
          return { ...p, cat: novaCategoria.trim() };
        }
        return p;
      });
      
      salvar();
    }
  }
  
  function removerCategoria(index) {
    if (confirm(`Tem certeza que deseja remover a categoria "${categorias[index]}"?`)) {
      const catRemovida = categorias[index];
      categorias.splice(index, 1);
      
      // Remove produtos da categoria removida ou move para primeira categoria dispon√≠vel
      if (categorias.length > 0) {
        produtos = produtos.map(p => {
          if (p.cat === catRemovida) {
            return { ...p, cat: categorias[0] };
          }
          return p;
        });
      } else {
        // Se n√£o houver mais categorias, remove todos os produtos
        produtos = [];
      }
      
      carrinho = {}; // limpa carrinho
      salvar();
    }
  }

  function addProduto() {
    const nome = document.getElementById('pNome').value;
    const preco = parseFloat(document.getElementById('pPreco').value);
    const cat = document.getElementById('pCategoria').value;
    const desc = document.getElementById('pDesc').value;
    if (!nome || isNaN(preco) || !cat) return alert('Preencha nome, pre√ßo e categoria');
    produtos.push({ nome, preco, cat, desc });
    document.getElementById('pNome').value = '';
    document.getElementById('pPreco').value = '';
    document.getElementById('pDesc').value = '';
    salvar();
  }

  function removerProduto(i) {
    if (confirm('Remover produto?')) {
      produtos.splice(i, 1);
      carrinho = {};
      salvar();
    }
  }

  function salvar() {
    localStorage.setItem('categorias', JSON.stringify(categorias));
    localStorage.setItem('produtos', JSON.stringify(produtos));
    render();
  }

  function finalizar() {
    const itens = [];
    let total = 0;
    produtos.forEach((p, i) => {
      if (carrinho[i]) {
        const sub = carrinho[i] * p.preco;
        total += sub;
        itens.push(`üçΩÔ∏è ${p.nome}  x${carrinho[i]}  = R$ ${sub.toFixed(2)}`);
      }
    });

    if (itens.length === 0) {
      alert('Adicione itens ao carrinho primeiro!');
      return;
    }

    const obs = document.getElementById('obs').value || 'Sem observa√ß√µes';
    const numero = numeroLoja.replace(/\D/g, '');
    if (!numero || numero.length < 10) {
      alert('N√∫mero da loja n√£o configurado! Acesse o painel do dono e configure o WhatsApp.');
      return;
    }

    const dataHora = new Date().toLocaleString('pt-BR');
    const mensagem = `üÜï *NOVO PEDIDO* üÜï
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
*Data:* ${dataHora}
*Pedido N¬∫:* ${pedido}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${itens.join('\n')}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
*Total:* R$ ${total.toFixed(2)}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìù *Observa√ß√µes:* ${obs}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;

    localStorage.setItem('pedido', ++pedido);
    window.open(`https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`, '_blank');
    carrinho = {};
    render();
  }

  function switchTab(tabId, btn) {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    ['geral','categorias','produtos','qrcode'].forEach(t => {
      document.getElementById(t).style.display = t === tabId ? 'block' : 'none';
    });
  }

  // Inicializa√ß√£o
  window.onload = function() {
    render();
    if (sessionStorage.getItem('adminAuth') === 'true') {
      adminLogado = true;
    }
  };

  // Exp√µe fun√ß√µes
  window.mudarQty = mudarQty;
  window.addCategoria = addCategoria;
  window.editarCategoria = editarCategoria;
  window.removerCategoria = removerCategoria;
  window.addProduto = addProduto;
  window.removerProduto = removerProduto;
  window.abrirModalEditar = abrirModalEditar;
  window.fecharModalEditar = fecharModalEditar;
  window.salvarEdicaoProduto = salvarEdicaoProduto;
  window.finalizar = finalizar;
  window.switchTab = switchTab;
  window.abrirModalAdmin = abrirModalAdmin;
  window.fecharModal = fecharModal;
  window.verificarSenha = verificarSenha;
  window.sairAdmin = sairAdmin;
</script>

</body>
</html>
