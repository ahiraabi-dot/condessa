<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MeuCard√°pio ¬∑ por OlaClick</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      background-color: #f3f4f6;
      color: #1f2937;
    }

    /* cores e identidade visual ‚Äî inspirado no olaclick */
    :root {
      --primary: #2563eb;       /* azul vibrante usado na IA */
      --primary-dark: #1d4ed8;
      --secondary: #f97316;     /* laranja para destaques */
      --gray-bg: #f9fafb;
      --card-white: #ffffff;
      --text-dark: #111827;
      --text-muted: #6b7280;
      --border-light: #e5e7eb;
    }

    /* HEADER MODERNO COM SOMBRA */
    header {
      background: var(--card-white);
      border-bottom: 1px solid var(--border-light);
      position: sticky;
      top: 0;
      z-index: 40;
      box-shadow: 0 4px 12px rgba(0,0,0,0.02);
    }

    .header-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 1.5rem;
      letter-spacing: -0.02em;
    }
    .logo span {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .logo .badge {
      background: #e0f2fe;
      color: #0369a1;
      font-size: 0.7rem;
      padding: 0.2rem 0.6rem;
      border-radius: 30px;
      font-weight: 500;
      margin-left: 8px;
      letter-spacing: normal;
    }

    .header-actions {
      display: flex;
      gap: 0.5rem;
    }
    .btn {
      padding: 0.6rem 1.2rem;
      border-radius: 40px;
      font-weight: 600;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      transition: all 0.15s;
      background: white;
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }
    .btn-primary {
      background: var(--primary);
      color: white;
      border: none;
      box-shadow: 0 4px 8px rgba(37,99,235,0.2);
    }
    .btn-primary:hover {
      background: var(--primary-dark);
      transform: scale(1.02);
    }
    .btn-outline {
      background: white;
      border: 1px solid var(--border-light);
    }
    .btn-outline:hover {
      background: var(--gray-bg);
      border-color: #9ca3af;
    }

    /* MAIN CONTAINER */
    .main-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 2rem 1.5rem 6rem; /* espa√ßo para o carrinho fixo */
    }

    /* SE√á√ïES */
    section {
      display: none;
    }
    section.active-section {
      display: block;
    }

    /* HERO ‚Äî LANDING INSPIRADA */
    .hero-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: 800;
      line-height: 1.2;
      letter-spacing: -0.03em;
    }
    .hero h1 .highlight {
      color: var(--primary);
      background: linear-gradient(145deg, var(--primary), #4f46e5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero p {
      font-size: 1.2rem;
      color: var(--text-muted);
      margin: 1.5rem 0 2rem;
    }
    .hero-stats {
      display: flex;
      gap: 2rem;
      margin-top: 2rem;
    }
    .stat-item {
      display: flex;
      flex-direction: column;
    }
    .stat-number {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--primary);
    }
    .stat-label {
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    .hero-image {
      background: #e6edf7;
      border-radius: 2rem;
      padding: 1rem;
      box-shadow: 0 25px 40px -15px rgba(0,0,0,0.2);
    }
    .hero-image img {
      width: 100%;
      border-radius: 1.2rem;
    }

    /* PAINEL ABAS */
    .admin-tabs {
      display: flex;
      gap: 0.5rem;
      border-bottom: 2px solid var(--border-light);
      padding-bottom: 0.2rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .tab-btn {
      background: transparent;
      border: none;
      padding: 0.7rem 1.5rem;
      font-weight: 600;
      color: var(--text-muted);
      border-radius: 30px 30px 0 0;
      cursor: pointer;
      transition: 0.1s;
      font-size: 0.95rem;
    }
    .tab-btn.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
      background: rgba(37,99,235,0.05);
    }

    /* CARDS ADMIN/CATEGORIA */
    .admin-card {
      background: var(--card-white);
      border-radius: 1.2rem;
      padding: 1.5rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.02);
      border: 1px solid var(--border-light);
      margin-bottom: 1.5rem;
    }
    .input-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin: 1rem 0;
    }
    .input-group input, .input-group select, .input-group textarea {
      padding: 0.8rem 1rem;
      border: 1px solid var(--border-light);
      border-radius: 1.5rem;
      font-size: 0.95rem;
      flex: 1 1 200px;
      background: var(--gray-bg);
    }
    .input-group textarea {
      min-width: 250px;
    }

    /* LISTAGEM DE PRODUTOS (card√°pio) */
    .category-title {
      font-size: 1.6rem;
      font-weight: 700;
      margin: 2rem 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .category-title::before {
      content: '‚Ä¢';
      color: var(--secondary);
      font-size: 2.5rem;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.2rem;
      margin-bottom: 2rem;
    }
    .product-card {
      background: var(--card-white);
      border: 1px solid var(--border-light);
      border-radius: 1.5rem;
      padding: 1.2rem;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 10px rgba(0,0,0,0.02);
    }
    .product-card strong {
      font-size: 1.2rem;
    }
    .product-desc {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin: 0.3rem 0 0.8rem;
      flex: 1;
    }
    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.8rem;
    }
    .product-price {
      font-weight: 700;
      color: var(--primary);
      font-size: 1.25rem;
    }
    .qty-control {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: #f3f4f6;
      padding: 0.2rem 0.2rem 0.2rem 0.8rem;
      border-radius: 2rem;
    }
    .qty-control button {
      background: white;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      cursor: pointer;
      color: var(--primary);
    }
    .qty-control button:hover {
      background: var(--primary);
      color: white;
    }

    /* CARRINHO FIXO BONITO */
    .cart-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border-light);
      padding: 0.8rem 1.5rem;
      z-index: 50;
    }
    .cart-container {
      max-width: 1280px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .cart-info {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }
    .cart-info textarea {
      width: 260px;
      height: 2.8rem;
      padding: 0.5rem 1rem;
      border-radius: 40px;
      border: 1px solid var(--border-light);
      resize: none;
      background: white;
    }
    .total-price {
      font-weight: 700;
      font-size: 1.3rem;
      color: var(--primary-dark);
    }

    /* QR CODE AREA */
    .qr-box {
      background: white;
      padding: 2rem;
      border-radius: 2rem;
      display: inline-block;
      box-shadow: 0 12px 30px rgba(0,0,0,0.05);
    }

    /* impress√£o cupom */
    @media print {
      body * { visibility: hidden; }
      #printArea, #printArea * { visibility: visible; }
      #printArea {
        position: absolute;
        top: 0;
        left: 0;
        width: 80mm;
        padding: 4mm;
        font-family: 'Courier New', monospace;
      }
    }

    /* responsivo */
    @media (max-width: 780px) {
      .hero-grid { grid-template-columns: 1fr; }
      .cart-container { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>

<header>
  <div class="header-container">
    <div class="logo">
      <span>MeuCard√°pio</span>
      <span class="badge">IA ready</span>
    </div>
    <div class="header-actions">
      <button class="btn btn-outline" onclick="showSection('home')">In√≠cio</button>
      <button class="btn btn-primary" onclick="showSection('admin')">Painel</button>
    </div>
  </div>
</header>

<main class="main-container">

  <!-- HOME / LANDING (inspirado OlaClick) -->
  <section id="home" class="active-section">
    <div class="hero-grid">
      <div class="hero">
        <h1>O sistema <span class="highlight">com IA</span> que os restaurantes adoram</h1>
        <p>Card√°pio digital inteligente, pedidos via WhatsApp, entregas automatizadas e gest√£o completa. Tudo em um s√≥ lugar.</p>
        <button class="btn btn-primary" onclick="showSection('menu')" style="padding:0.8rem 2.5rem;">Ver card√°pio ‚Üí</button>
        <div class="hero-stats">
          <div class="stat-item"><span class="stat-number">+50k</span><span class="stat-label">restaurantes</span></div>
          <div class="stat-item"><span class="stat-number">1,3M</span><span class="stat-label">pedidos/m√™s</span></div>
          <div class="stat-item"><span class="stat-number">ü§ñ IA</span><span class="stat-label">ativa 24h</span></div>
        </div>
      </div>
      <div class="hero-image">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400' viewBox='0 0 600 400'%3E%3Crect width='600' height='400' fill='%232563eb'/%3E%3Ctext x='40' y='200' font-family='Arial' font-size='30' fill='white' font-weight='bold'%3ECard√°pio digital%3C/text%3E%3Ctext x='40' y='260' fill='%23f9fafb' font-size='20'%3E+ intelig√™ncia artificial%3C/text%3E%3C/svg%3E" alt="Dashboard OlaClick">
      </div>
    </div>
  </section>

  <!-- MENU / CARD√ÅPIO (cliente) -->
  <section id="menu">
    <h2 style="font-size:2rem; margin-bottom:1rem;">üçΩÔ∏è Card√°pio</h2>
    <div id="menuList" class="product-grid"></div>
  </section>

  <!-- PAINEL ADMIN -->
  <section id="admin">
    <div class="admin-tabs">
      <button class="tab-btn active" onclick="switchTab('geral', this)">Geral</button>
      <button class="tab-btn" onclick="switchTab('categorias', this)">Categorias</button>
      <button class="tab-btn" onclick="switchTab('produtos', this)">Produtos</button>
      <button class="tab-btn" onclick="switchTab('qrcode', this)">QR Code</button>
    </div>

    <!-- geral -->
    <div id="geral" class="admin-card">
      <h3>üìã Vis√£o geral</h3>
      <p>Gerencie categorias, produtos e compartilhe seu card√°pio. Tudo sincronizado com o carrinho.</p>
      <p><strong>Dica:</strong> use IA para sugerir combos (simula√ß√£o)</p>
    </div>

    <!-- categorias -->
    <div id="categorias" style="display:none;" class="admin-card">
      <h3>‚ûï Categorias</h3>
      <div class="input-group">
        <input type="text" id="catNome" placeholder="Ex: Pizzas, Bebidas...">
        <button class="btn btn-primary" onclick="addCategoria()">Adicionar</button>
      </div>
      <div id="catList"></div>
    </div>

    <!-- produtos -->
    <div id="produtos" style="display:none;" class="admin-card">
      <h3>üçî Adicionar produto</h3>
      <div class="input-group">
        <input type="text" id="pNome" placeholder="Nome">
        <input type="number" id="pPreco" placeholder="Pre√ßo R$" step="0.01">
        <select id="pCategoria"></select>
        <textarea id="pDesc" placeholder="Descri√ß√£o curta" rows="2"></textarea>
        <button class="btn btn-primary" onclick="addProduto()">Salvar produto</button>
      </div>
      <hr style="margin:1.5rem 0;">
      <h4>Produtos existentes</h4>
      <div id="prodList" style="margin-top:1rem;"></div>
    </div>

    <!-- qrcode -->
    <div id="qrcode" style="display:none;" class="admin-card">
      <h3>üì≤ QR Code do card√°pio</h3>
      <div class="qr-box">
        <img id="qr" width="220" src="" alt="QR code">
      </div>
      <p style="color: var(--text-muted);">Escaneie para acessar o card√°pio</p>
    </div>
  </section>
</main>

<!-- CARRINHO FIXO (igual OlaClick) -->
<div class="cart-bar">
  <div class="cart-container">
    <div class="cart-info">
      <textarea id="obs" placeholder="Observa√ß√µes (ex: tirar cebola)"></textarea>
      <span class="total-price" id="total">R$ 0,00</span>
    </div>
    <button class="btn btn-primary" onclick="finalizar()" style="padding:0.8rem 2rem;">‚úîÔ∏è Finalizar pedido</button>
  </div>
</div>

<!-- √°rea impress√£o -->
<div id="printArea" style="display:none">
  <center>
    <h2>MeuCard√°pio</h2>
    <strong>Pedido N¬∫ <span id="num"></span></strong><br>
    <span id="data"></span>
  </center>
  <hr>
  <div id="printItens"></div>
  <hr>
  <p id="printObs"></p>
  <strong id="printTotal"></strong>
</div>

<script>
  // --- dados iniciais
  let categorias = JSON.parse(localStorage.getItem('categorias')) || ['Pizzas', 'Bebidas'];
  let produtos = JSON.parse(localStorage.getItem('produtos')) || [
    { nome: 'Margherita', preco: 35.90, cat: 'Pizzas', desc: 'Molho, mussarela, manjeric√£o' },
    { nome: 'Calabresa', preco: 42.50, cat: 'Pizzas', desc: 'Calabresa, cebola, azeitona' },
    { nome: 'Coca-cola 2L', preco: 12.00, cat: 'Bebidas', desc: 'Gelada' }
  ];
  let carrinho = {}; // { indice: quantidade }
  let pedido = Number(localStorage.getItem('pedido')) || 1;

  // ----- controle de se√ß√µes (home, menu, admin)
  function showSection(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active-section'));
    document.getElementById(id).classList.add('active-section');
    if (id === 'menu' || id === 'admin') render(); // atualiza
  }

  // abas admin
  function switchTab(tabId, btn) {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    ['geral','categorias','produtos','qrcode'].forEach(t => {
      document.getElementById(t).style.display = t === tabId ? 'block' : 'none';
    });
    render(); // para popular selects e listas
  }

  // ----- persist√™ncia
  function salvar() {
    localStorage.setItem('categorias', JSON.stringify(categorias));
    localStorage.setItem('produtos', JSON.stringify(produtos));
    render();
  }

  // categorias
  function addCategoria() {
    const inp = document.getElementById('catNome');
    if (inp.value.trim()) {
      categorias.push(inp.value.trim());
      inp.value = '';
      salvar();
    }
  }

  // produtos
  function addProduto() {
    const nome = document.getElementById('pNome').value;
    const preco = parseFloat(document.getElementById('pPreco').value);
    const cat = document.getElementById('pCategoria').value;
    const desc = document.getElementById('pDesc').value;
    if (!nome || isNaN(preco) || !cat) return alert('preencha nome, pre√ßo e categoria');
    produtos.push({ nome, preco, cat, desc });
    document.getElementById('pNome').value = '';
    document.getElementById('pPreco').value = '';
    document.getElementById('pDesc').value = '';
    salvar();
  }

  // render principal (card√°pio, selects, listas, qr)
  function render() {
    // select de categoria no admin
    const selectCat = document.getElementById('pCategoria');
    if (selectCat) {
      selectCat.innerHTML = categorias.map(c => `<option>${c}</option>`).join('');
    }

    // lista de categorias (simples)
    const catDiv = document.getElementById('catList');
    if (catDiv) {
      catDiv.innerHTML = categorias.map(c => `<span style="display:inline-block;background:#eef2f6;padding:0.3rem 1rem;border-radius:30px;margin:0.3rem;">${c}  </span>`).join('');
    }

    // lista de produtos admin
    const prodDiv = document.getElementById('prodList');
    if (prodDiv) {
      prodDiv.innerHTML = produtos.map((p,i) => `<div style="display:flex;justify-content:space-between;border-bottom:1px dashed #ccc;padding:8px 0">${p.nome} - R$ ${p.preco.toFixed(2)} <button class="btn btn-outline" style="padding:0.2rem 0.8rem;" onclick="removerProduto(${i})">remover</button></div>`).join('');
    }

    // card√°pio (menu) em grid
    const menuEl = document.getElementById('menuList');
    if (menuEl) {
      let html = '';
      categorias.forEach(cat => {
        const produtosCat = produtos.filter(p => p.cat === cat);
        if (produtosCat.length === 0) return;
        html += `<div class="category-title">${cat}</div>`;
        produtosCat.forEach((p, idx) => {
          const realIndex = produtos.findIndex(prod => prod.nome === p.nome && prod.cat === p.cat); // chave simples
          const q = carrinho[realIndex] || 0;
          html += `
            <div class="product-card">
              <strong>${p.nome}</strong>
              <div class="product-desc">${p.desc || ''}</div>
              <div class="product-footer">
                <span class="product-price">R$ ${p.preco.toFixed(2)}</span>
                <div class="qty-control">
                  <span>${q}</span>
                  <button onclick="mudarQty(${realIndex}, -1)">‚àí</button>
                  <button onclick="mudarQty(${realIndex}, 1)">+</button>
                </div>
              </div>
            </div>
          `;
        });
      });
      menuEl.innerHTML = html || '<p style="color:gray;">Nenhum produto cadastrado</p>';
    }

    // total carrinho
    const total = Object.entries(carrinho).reduce((acc, [idx, qty]) => acc + (produtos[idx]?.preco || 0) * qty, 0);
    document.getElementById('total').innerText = `R$ ${total.toFixed(2)}`;

    // QR code
    const qrImg = document.getElementById('qr');
    if (qrImg) {
      qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(window.location.href)}`;
    }
  }

  // manipular quantidade
  function mudarQty(index, delta) {
    if (!produtos[index]) return;
    const atual = carrinho[index] || 0;
    const nova = atual + delta;
    if (nova <= 0) {
      delete carrinho[index];
    } else {
      carrinho[index] = nova;
    }
    render();
  }

  // remover produto admin
  function removerProduto(i) {
    if (confirm('Remover produto?')) {
      produtos.splice(i, 1);
      carrinho = {}; // opcional: limpar carrinho
      salvar();
    }
  }

  // finalizar pedido (whats + impressao)
  function finalizar() {
    const itens = [];
    let total = 0;
    produtos.forEach((p, i) => {
      if (carrinho[i]) {
        const sub = carrinho[i] * p.preco;
        total += sub;
        itens.push(`${p.nome} x${carrinho[i]} = R$ ${sub.toFixed(2)}`);
      }
    });
    if (itens.length === 0) return alert('carrinho vazio');

    document.getElementById('num').innerText = pedido;
    document.getElementById('data').innerText = new Date().toLocaleString('pt-BR');
    document.getElementById('printItens').innerHTML = itens.map(i => `<p>${i}</p>`).join('');
    document.getElementById('printObs').innerText = 'Obs: ' + (document.getElementById('obs').value || 'sem observa√ß√µes');
    document.getElementById('printTotal').innerText = 'Total: R$ ' + total.toFixed(2);

    // incrementa pedido
    localStorage.setItem('pedido', ++pedido);
    window.print();

    // mensagem whatsapp (simulado)
    const msg = `Pedido *${pedido-1}*%0A${itens.join('%0A')}%0ATotal: R$ ${total.toFixed(2)}`;
    window.open(`https://wa.me/5511999999999?text=${msg}`, '_blank');
  }

  // inicial
  render();
  window.mudarQty = mudarQty;
  window.addCategoria = addCategoria;
  window.addProduto = addProduto;
  window.removerProduto = removerProduto;
  window.finalizar = finalizar;
  window.showSection = showSection;
  window.switchTab = switchTab;
</script>
</body>
</html>
